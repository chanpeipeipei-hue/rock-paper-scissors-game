<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ…å‰ªæ¼éŠæˆ² - Rock Paper Scissors</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function RockPaperScissors() {
            const [playerChoice, setPlayerChoice] = useState(null);
            const [computerChoice, setComputerChoice] = useState(null);
            const [result, setResult] = useState('');
            const [score, setScore] = useState({ player: 0, computer: 0, tie: 0 });
            const [isAnimating, setIsAnimating] = useState(false);
            const [playerName, setPlayerName] = useState('ç©å®¶');
            const [computerName, setComputerName] = useState('é›»è…¦å°æ‰‹');
            const [showNameInput, setShowNameInput] = useState(false);
            const [selectedLevel, setSelectedLevel] = useState(0);
            const [showLevelSelect, setShowLevelSelect] = useState(false);

            // é›»è…¦ç­‰ç´šç³»çµ±
            const computerLevels = [
                { name: 'æ–°æ‰‹æ©Ÿå™¨äºº', minScore: 0, emoji: 'ğŸ¤–', winRate: 0.3, description: 'å‰›å­¸æœƒç©çš„æ©Ÿå™¨äººï¼Œå¾ˆå®¹æ˜“æ‰“æ•—' },
                { name: 'æ™®é€šå°æ‰‹', minScore: 3, emoji: 'ğŸ’»', winRate: 0.5, description: 'ä¸€èˆ¬æ°´å¹³ï¼Œå‹è² å„åŠ' },
                { name: 'é«˜æ‰‹é›»è…¦', minScore: 6, emoji: 'ğŸ¯', winRate: 0.65, description: 'ç¶“é©—è±å¯Œï¼Œæœ‰é»é›£å°ä»˜' },
                { name: 'å¤§å¸«ç´šAI', minScore: 10, emoji: 'ğŸ‘‘', winRate: 0.8, description: 'é«˜æ‰‹ä¸­çš„é«˜æ‰‹ï¼Œå°å¿ƒæ‡‰æˆ°' },
                { name: 'çµ‚æ¥µæŒ‘æˆ°è€…', minScore: 15, emoji: 'ğŸ”¥', winRate: 0.9, description: 'å¹¾ä¹ä¸æœƒè¼¸çš„çµ‚æ¥µå°æ‰‹' }
            ];

            const choices = [
                { name: 'çŸ³é ­', emoji: 'âœŠ', value: 'rock' },
                { name: 'å‰ªåˆ€', emoji: 'âœŒï¸', value: 'scissors' },
                { name: 'å¸ƒ', emoji: 'âœ‹', value: 'paper' }
            ];

            // è¨ˆç®—ç•¶å‰é›»è…¦ç­‰ç´š
            const getCurrentLevel = () => {
                return computerLevels[selectedLevel];
            };

            const currentLevel = getCurrentLevel();

            const getRandomChoice = () => {
                return choices[Math.floor(Math.random() * choices.length)];
            };

            // æ™ºèƒ½é›»è…¦é¸æ“‡ï¼ˆæ ¹æ“šç­‰ç´šèª¿æ•´å‹ç‡ï¼‰
            const getComputerChoice = (playerChoice) => {
                const random = Math.random();
                
                // æ ¹æ“šç­‰ç´šæ±ºå®šæ˜¯å¦ä½¿ç”¨æ™ºèƒ½ç­–ç•¥
                if (random < currentLevel.winRate && playerChoice) {
                    // æ™ºèƒ½é¸æ“‡ï¼šé¸æ“‡èƒ½è´ç©å®¶çš„é¸é …
                    if (playerChoice.value === 'rock') return choices.find(c => c.value === 'paper');
                    if (playerChoice.value === 'scissors') return choices.find(c => c.value === 'rock');
                    if (playerChoice.value === 'paper') return choices.find(c => c.value === 'scissors');
                }
                
                // éš¨æ©Ÿé¸æ“‡
                return getRandomChoice();
            };

            const determineWinner = (player, computer) => {
                if (player.value === computer.value) return 'tie';
                if (
                    (player.value === 'rock' && computer.value === 'scissors') ||
                    (player.value === 'scissors' && computer.value === 'paper') ||
                    (player.value === 'paper' && computer.value === 'rock')
                ) {
                    return 'player';
                }
                return 'computer';
            };

            const playGame = (choice) => {
                if (isAnimating) return;
                
                setIsAnimating(true);
                setPlayerChoice(choice);
                setResult('');
                
                setTimeout(() => {
                    const compChoice = getComputerChoice(choice);
                    setComputerChoice(compChoice);
                    
                    const winner = determineWinner(choice, compChoice);
                    
                    if (winner === 'player') {
                        setResult('ğŸ‰ ä½ è´äº†ï¼');
                        setScore(prev => ({ ...prev, player: prev.player + 1 }));
                    } else if (winner === 'computer') {
                        setResult('ğŸ˜” é›»è…¦è´äº†ï¼');
                        setScore(prev => ({ ...prev, computer: prev.computer + 1 }));
                    } else {
                        setResult('ğŸ¤ å¹³æ‰‹ï¼');
                        setScore(prev => ({ ...prev, tie: prev.tie + 1 }));
                    }
                    
                    setIsAnimating(false);
                }, 500);
            };

            const resetGame = () => {
                setPlayerChoice(null);
                setComputerChoice(null);
                setResult('');
                setScore({ player: 0, computer: 0, tie: 0 });
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-500 via-pink-500 to-red-500 flex items-center justify-center p-4">
                    <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full">
                        <h1 className="text-4xl font-bold text-center mb-2 text-gray-800">
                            åŒ…å‰ªæ¼éŠæˆ²
                        </h1>
                        <p className="text-center text-gray-600 mb-6">é¸æ“‡ä½ çš„å‡ºæ‹³ï¼</p>
                        
                        {/* è¨ˆåˆ†æ¿ */}
                        <div className="grid grid-cols-3 gap-4 mb-8">
                            <div className="bg-blue-100 rounded-lg p-4 text-center">
                                <div className="text-sm text-gray-600 truncate">{playerName}</div>
                                <div className="text-3xl font-bold text-blue-600">{score.player}</div>
                            </div>
                            <div className="bg-gray-100 rounded-lg p-4 text-center">
                                <div className="text-sm text-gray-600">å¹³æ‰‹</div>
                                <div className="text-3xl font-bold text-gray-600">{score.tie}</div>
                            </div>
                            <div className="bg-red-100 rounded-lg p-4 text-center">
                                <div className="text-sm text-gray-600 truncate">{currentLevel.emoji} {currentLevel.name}</div>
                                <div className="text-3xl font-bold text-red-600">{score.computer}</div>
                            </div>
                        </div>

                        {/* éŠæˆ²å€åŸŸ */}
                        <div className="grid grid-cols-2 gap-8 mb-8">
                            <div className="text-center">
                                <div className="text-lg font-semibold mb-4 text-gray-700">{playerName}</div>
                                <div className="bg-blue-50 rounded-full w-32 h-32 flex items-center justify-center mx-auto border-4 border-blue-300">
                                    <span className="text-6xl">
                                        {playerChoice ? playerChoice.emoji : 'â“'}
                                    </span>
                                </div>
                                {playerChoice && (
                                    <div className="mt-3 text-lg font-medium text-gray-700">
                                        {playerChoice.name}
                                    </div>
                                )}
                            </div>
                            
                            <div className="text-center">
                                <div className="text-lg font-semibold mb-4 text-gray-700">{currentLevel.emoji} {currentLevel.name}</div>
                                <div className="bg-red-50 rounded-full w-32 h-32 flex items-center justify-center mx-auto border-4 border-red-300">
                                    <span className="text-6xl">
                                        {computerChoice ? computerChoice.emoji : 'â“'}
                                    </span>
                                </div>
                                {computerChoice && (
                                    <div className="mt-3 text-lg font-medium text-gray-700">
                                        {computerChoice.name}
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* çµæœé¡¯ç¤º */}
                        {result && (
                            <div className="text-center mb-6">
                                <div className="text-3xl font-bold text-gray-800 animate-bounce">
                                    {result}
                                </div>
                            </div>
                        )}

                        {/* é¸æ“‡æŒ‰éˆ• */}
                        <div className="grid grid-cols-3 gap-4 mb-6">
                            {choices.map((choice) => (
                                <button
                                    key={choice.value}
                                    onClick={() => playGame(choice)}
                                    disabled={isAnimating}
                                    className="bg-gradient-to-br from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-xl p-6 transform hover:scale-105 transition-all duration-200 shadow-lg disabled:cursor-not-allowed"
                                >
                                    <div className="text-5xl mb-2">{choice.emoji}</div>
                                    <div className="text-lg font-semibold">{choice.name}</div>
                                </button>
                            ))}
                        </div>

                        {/* æ§åˆ¶æŒ‰éˆ• */}
                        <div className="grid grid-cols-3 gap-3">
                            <button
                                onClick={() => setShowLevelSelect(!showLevelSelect)}
                                className="bg-orange-600 hover:bg-orange-700 text-white rounded-xl py-3 font-semibold transition-colors duration-200"
                            >
                                ğŸ® é¸æ“‡ç­‰ç´š
                            </button>
                            <button
                                onClick={() => setShowNameInput(!showNameInput)}
                                className="bg-purple-600 hover:bg-purple-700 text-white rounded-xl py-3 font-semibold transition-colors duration-200"
                            >
                                âš™ï¸ è¨­å®šåç¨±
                            </button>
                            <button
                                onClick={resetGame}
                                className="bg-gray-600 hover:bg-gray-700 text-white rounded-xl py-3 font-semibold transition-colors duration-200"
                            >
                                ğŸ”„ é‡æ–°é–‹å§‹
                            </button>
                        </div>

                        {/* ç­‰ç´šé¸æ“‡ä»‹é¢ */}
                        {showLevelSelect && (
                            <div className="mt-6 bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-6 border-2 border-orange-300">
                                <h3 className="text-xl font-bold text-gray-800 mb-4 text-center">é¸æ“‡æ©Ÿå™¨äººç­‰ç´š</h3>
                                <div className="space-y-3">
                                    {computerLevels.map((level, index) => (
                                        <button
                                            key={index}
                                            onClick={() => {
                                                setSelectedLevel(index);
                                                setShowLevelSelect(false);
                                            }}
                                            className={`w-full p-4 rounded-lg border-2 transition-all duration-200 text-left ${
                                                selectedLevel === index
                                                    ? 'bg-orange-500 border-orange-600 text-white shadow-lg transform scale-105'
                                                    : 'bg-white border-orange-200 hover:border-orange-400 hover:shadow-md'
                                            }`}
                                        >
                                            <div className="flex items-center justify-between">
                                                <div className="flex items-center space-x-3">
                                                    <span className="text-3xl">{level.emoji}</span>
                                                    <div>
                                                        <div className={`font-bold text-lg ${selectedLevel === index ? 'text-white' : 'text-gray-800'}`}>
                                                            {level.name}
                                                        </div>
                                                        <div className={`text-sm ${selectedLevel === index ? 'text-orange-100' : 'text-gray-600'}`}>
                                                            {level.description}
                                                        </div>
                                                    </div>
                                                </div>
                                                {selectedLevel === index && (
                                                    <span className="text-2xl">âœ“</span>
                                                )}
                                            </div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* åç¨±è¨­å®šå½ˆå‡ºè¦–çª— */}
                        {showNameInput && (
                            <div className="mt-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-300">
                                <h3 className="text-xl font-bold text-gray-800 mb-4 text-center">è¨­å®šåç¨±</h3>
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            ä½ çš„åç¨±ï¼š
                                        </label>
                                        <input
                                            type="text"
                                            value={playerName}
                                            onChange={(e) => setPlayerName(e.target.value || 'ç©å®¶')}
                                            className="w-full px-4 py-2 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"
                                            placeholder="è¼¸å…¥ä½ çš„åç¨±"
                                            maxLength={15}
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            é›»è…¦åç¨±ï¼š
                                        </label>
                                        <input
                                            type="text"
                                            value={computerName}
                                            onChange={(e) => setComputerName(e.target.value || 'é›»è…¦å°æ‰‹')}
                                            className="w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:outline-none focus:border-red-500"
                                            placeholder="è¼¸å…¥é›»è…¦åç¨±"
                                            maxLength={15}
                                        />
                                    </div>
                                    <button
                                        onClick={() => setShowNameInput(false)}
                                        className="w-full bg-green-600 hover:bg-green-700 text-white rounded-lg py-2 font-semibold transition-colors duration-200"
                                    >
                                        âœ“ å®Œæˆ
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<RockPaperScissors />, document.getElementById('root'));
    </script>
</body>
</html>
